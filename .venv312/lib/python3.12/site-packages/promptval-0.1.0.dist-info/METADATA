Metadata-Version: 2.4
Name: promptval
Version: 0.1.0
Summary: Prompt Directory Validator: validate and optionally fix prompt .txt files for redundancy, conflicts, completeness, and PII.
Project-URL: Homepage, https://example.com/promptval
Author-email: Pibit Candidate <candidate@example.com>
License: MIT
Keywords: cli,pii,prompts,quality,validation
Classifier: License :: OSI Approved :: MIT License
Classifier: Operating System :: OS Independent
Classifier: Programming Language :: Python :: 3
Requires-Python: >=3.10
Requires-Dist: pydantic<3.0,>=2.0
Requires-Dist: rich>=13.0.0
Requires-Dist: typer>=0.9.0
Provides-Extra: dev
Requires-Dist: pytest-cov>=4.0; extra == 'dev'
Requires-Dist: pytest>=7.0; extra == 'dev'
Provides-Extra: openai
Requires-Dist: openai<2.0.0,>=1.0.0; extra == 'openai'
Description-Content-Type: text/markdown

# PromptVal

PromptVal is a Python module and CLI to validate and optionally fix a directory of prompt `.txt` files. It detects:

- Redundant instructions
- Conflicting instructions
- Missing strategy sections (Task, Success Criteria, Examples with an edge case, CoT/TOT guidance)
- PII/Secrets

## Install

Requirments:
- Openai_api_key required

```bash
pip3 install -e .
# For dev/test extras on zsh use quotes:
pip3 install -e '.[dev]'
```

## CLI Usage

Interactive validation and optional application of fixes:

```bash
export OPENAI_API_KEY=...  # required for LLM mode
promptval validate ./samples --report-json report.json
# You will be prompted to confirm applying corrections to ./corrected
```

Non-interactive apply (auto-approve):

```bash
promptval validate ./samples --report-json report.json --yes
```

Notes:

- `--llm/--no-llm` toggles LLM usage (on by default). When LLM is disabled or unavailable, only PII redaction and minimal formatting are applied; redundancy/conflict/completeness checks require LLM.
- Corrected files are written to `./corrected` and contain only the LLM-corrected prompt.
- The corrected prompt is multi-line and sectioned: Task, Success Criteria, Examples (Normal/Edge), CoT/TOT, No Secrets/No PII.

## Python API

```python
from promptval.api import validate_directory, apply_fixes

results = validate_directory("./samples")
apply_fixes(results, out_dir="./corrected")
```

## Development

- Python 3.10+
- Install dev deps: `pip install -e '.[dev]'`
- LLM extras: `pip install -e '.[openai]'` and set `OPENAI_API_KEY`.
- Run tests and coverage: `pytest -q --cov=promptval --cov-report=term-missing`.

## Architecture

- LLM provider abstraction in `promptval/llm/provider.py` with `ProviderFactory`.
- OpenAI implementation in `promptval/llm/providers/openai_provider.py` using `promptval/llm/prompts.py`.
- Rule entrypoints in `promptval/rules/core.py` and re-exported from `promptval/rules/__init__.py`.

## License

MIT